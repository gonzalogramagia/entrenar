## Especificaciones Funcionales: App de Registro de Entrenamientos de Gimnasio

### ðŸŽ¯ Objetivo general
Desarrollar una app web personalizable que permita registrar y reflexionar sobre la rutina de entrenamiento actual, con funcionalidades complementarias que ayuden a sostenerla en el tiempo y a ejecutarla correctamente.

### ðŸ’¡ MotivaciÃ³n personal
Sigo una rutina fullbody 3 veces por semana, enfocada en hipertrofia muscular. Hacer los mismos ejercicios en cada sesiÃ³n me permite medir el progreso y mantener consistencia. Esta app ayuda a:
- Registrar entrenamientos (peso, reps, series, tiempo, observaciones)
- Controlar el tiempo de cada serie (cronÃ³metro 40â€“50s)
- Consultar informaciÃ³n del equipo/ejericios

Frecuencia Ã³ptima: entrenar todo el cuerpo 3 veces por semana (lunes/miÃ©rcoles/viernes) con suficiente recuperaciÃ³n.

---

### ðŸ§© Alcance del MVP (extendido)

| Funcionalidad | DescripciÃ³n |
| --- | --- |
| Registro de entrenamientos | Formulario con campos: ejercicio, serie, peso, segundos, repeticiones, observaciones. Guarda en Supabase. |
| AutenticaciÃ³n | Google OAuth con Supabase para autenticaciÃ³n segura. |
| CronÃ³metro | Iniciar/pausar/resetear. GuÃ­a visual para 40â€“50 segundos por serie. No persiste. |
| Ejercicios y equipos | Buscador; al seleccionar ejercicio muestra equipo, grupo muscular y tips. |
| Notificaciones | Recordatorios sobre horarios del gym (feriados, paros, recesos). Carga manual inicial. |

### ðŸ—‚ï¸ NavegaciÃ³n / PestaÃ±as
- ðŸ“‹ Registro
- â±ï¸ CronÃ³metro
- ðŸ‹ï¸â€â™‚ï¸ Ejercicios
- ðŸ”” Notificaciones

---

### ðŸ§± Base de datos (Supabase) â€” Estructura actual

#### Tabla `equipment`
```sql
create table public.equipment (
  id bigint generated by default as identity not null,
  name text not null,
  category public.equipment_category not null,
  observations text null,
  image_url text null,
  created_at timestamp with time zone not null default now(),
  constraint equipment_pkey primary key (id),
  constraint equipment_name_key unique (name)
);
```

#### Tabla `exercises`
```sql
create table public.exercises (
  id bigint generated by default as identity not null,
  name text not null,
  muscle_group public.exercises_muscle_group not null,
  equipment_id bigint not null,
  video_url text null,
  observations text null,
  is_sport boolean not null default false,
  created_at timestamp with time zone not null default now(),
  constraint exercises_pkey primary key (id),
  constraint exercises_name_key unique (name),
  constraint exercises_equipment_id_fkey foreign key (equipment_id) references equipment (id) on delete cascade
);
```

#### Tabla `workouts`
```sql
create table public.workouts (
  id bigint generated by default as identity not null,
  exercise_id bigint not null,
  serie bigint null,
  weight double precision not null,
  seconds bigint null,
  reps bigint not null,
  observations text null,
  created_at timestamp with time zone not null default now(),
  constraint workouts_pkey primary key (id),
  constraint workouts_exercise_id_fkey foreign key (exercise_id) references exercises (id) on delete cascade
);
```

#### Tabla `muscle_groups`
```sql
create table public.muscle_groups (
  id bigint generated by default as identity not null,
  name text not null,
  category public.muscle_groups_category not null,
  observations text null,
  created_at timestamp with time zone not null default now(),
  constraint muscle_groups_pkey primary key (id)
);
```

#### Tabla `exercise_muscle_groups`
```sql
create table public.exercise_muscle_groups (
  id bigint generated by default as identity not null,
  exercise_id bigint not null,
  muscule_group_id bigint not null,
  role public.muscle_groups_role not null,
  created_at timestamp with time zone not null default now(),
  constraint exercise_muscle_groups_pkey primary key (id),
  constraint exercise_muscle_groups_exercise_id_fkey foreign key (exercise_id) references exercises (id) on delete cascade,
  constraint exercise_muscle_groups_muscule_group_id_fkey foreign key (muscule_group_id) references muscle_groups (id) on delete cascade
);
```

> Enums relevantes: `equipment_category`, `exercises_muscle_group`, `muscle_groups_category`, `muscle_groups_role`.

---

### ðŸ” Seguridad
- AutenticaciÃ³n con Google OAuth antes de permitir el registro
- Futuro: Supabase Auth si hay usuarios mÃºltiples
- RLS a definir segÃºn necesidades de lectura/escritura por recurso

---

### ðŸ§° Stack tÃ©cnico
- **Frontend**: React + TypeScript + Vite
- **Testing Frontend**: Vitest + React Testing Library
- **Backend**: Go (API REST) + librerÃ­a estÃ¡ndar de testing
- **DB**: Supabase (PostgreSQL)

---

### ðŸ”Œ API REST (borrador de endpoints)

- `GET /api/workouts` â€” listar entrenamientos (paginado, filtros por fecha/ejercicio)
- `POST /api/workouts` â€” crear entrenamiento
- `GET /api/exercises` â€” listar ejercicios (filtros: grupo muscular, equipo)
- `GET /api/equipment` â€” listar equipos
- `GET /api/health` â€” health check del backend

ValidaciÃ³n Back-End:
- `weight` y `reps` son obligatorios para crear `workout`
- `exercise_id` debe existir y estar activo

---

### ðŸ§ª Enfoque TDD

#### Fase 1 â€” Frontend (Vitest + RTL)
- Componentes: `LoginComponent`, `WorkoutForm`, `TimerComponent`, `ExerciseList`, `EquipmentDetail`
- IntegraciÃ³n: flujo de registro, navegaciÃ³n por pestaÃ±as, errores de API
- Hooks: `useWorkoutForm`, `useTimer`, `useExercises`, `useEquipment`

#### Fase 2 â€” Backend (Go stdlib)
- Handlers: `GET/POST /api/workouts`, `GET /api/exercises`, `GET /api/equipment`
- Middleware: Supabase Auth, CORS, logging
- Modelos/utilidades: validaciones y conversiÃ³n de tipos

#### Fase 3 â€” Base de datos
- Migraciones: creaciÃ³n de tablas, Ã­ndices, constraints
- Queries: rendimiento e integridad de datos en joins `workouts/exercises/equipment`

#### Fase 4 â€” E2E (posterior)
- Flujos completos: registro, uso de cronÃ³metro, bÃºsqueda y detalle de ejercicios

---

### âœ… Criterios de aceptaciÃ³n

- Registro de Entrenamientos
  - Usuario selecciona ejercicio, ingresa peso y reps (obligatorios); serie/segundos/observaciones (opcionales)
  - Guardado exitoso en Supabase y feedback visual
  - Manejo de errores de red/validaciÃ³n

- AutenticaciÃ³n
  - AutenticaciÃ³n con Google OAuth requerida
  - Error con cÃ³digo incorrecto; acceso con cÃ³digo correcto
  - SesiÃ³n simple mientras navega (estado global)

- CronÃ³metro
  - Iniciar/pausar/resetear
  - Indicador visual cuando estÃ¡ entre 40â€“50s

- Ejercicios
  - Lista desde Supabase
  - Filtro por grupo muscular y equipo
  - Detalle: nombre, equipo, grupo muscular, observaciones, video (opcional)

- Notificaciones
  - Lista, filtro por tipo, orden por fecha

---

### ðŸ“Š MÃ©tricas de calidad
- Cobertura de tests: Frontend >80%, Backend >85%, E2E >70%
- Performance: carga inicial <3s; API <500ms
- Accesibilidad: WCAG 2.1 AA; navegaciÃ³n por teclado; compatible screen reader

---

### ðŸš€ Futuro
- Exportar registros a CSV o Google Sheets
- AutenticaciÃ³n con cuentas de Google UNC (vÃ­a Supabase Auth)
- Seguimiento de progresos (peso total movido por semana)
- Modo mÃ³vil y soporte offline
- Tests de carga y monitoreo/alertas


