## Especificaciones Funcionales: App de Registro de Entrenamientos de Gimnasio

### 🎯 Objetivo general
Desarrollar una app web personalizable que permita registrar y reflexionar sobre la rutina de entrenamiento actual, con funcionalidades complementarias que ayuden a sostenerla en el tiempo y a ejecutarla correctamente.

### 💡 Motivación personal
Sigo una rutina fullbody 3 veces por semana, enfocada en hipertrofia muscular. Hacer los mismos ejercicios en cada sesión me permite medir el progreso y mantener consistencia. Esta app ayuda a:
- Registrar entrenamientos (peso, reps, series, tiempo, observaciones)
- Controlar el tiempo de cada serie (cronómetro 40–50s)
- Consultar información del equipo/ejericios

Frecuencia óptima: entrenar todo el cuerpo 3 veces por semana (lunes/miércoles/viernes) con suficiente recuperación.

---

### 🧩 Alcance del MVP (extendido)

| Funcionalidad | Descripción |
| --- | --- |
| Registro de entrenamientos | Formulario con campos: ejercicio, serie, peso, segundos, repeticiones, observaciones. Guarda en Supabase. |
| Autenticación | Google OAuth con Supabase para autenticación segura. |
| Cronómetro | Iniciar/pausar/resetear. Guía visual para 40–50 segundos por serie. No persiste. |
| Ejercicios y equipos | Buscador; al seleccionar ejercicio muestra equipo, grupo muscular y tips. |
| Notificaciones | Recordatorios sobre horarios del gym (feriados, paros, recesos). Carga manual inicial. |

### 🗂️ Navegación / Pestañas
- 📋 Registro
- ⏱️ Cronómetro
- 🏋️‍♂️ Ejercicios
- 🔔 Notificaciones

---

### 🧱 Base de datos (Supabase) — Estructura actual

#### Tabla `equipment`
```sql
create table public.equipment (
  id bigint generated by default as identity not null,
  name text not null,
  category public.equipment_category not null,
  observations text null,
  image_url text null,
  created_at timestamp with time zone not null default now(),
  constraint equipment_pkey primary key (id),
  constraint equipment_name_key unique (name)
);
```

#### Tabla `exercises`
```sql
create table public.exercises (
  id bigint generated by default as identity not null,
  name text not null,
  muscle_group public.exercises_muscle_group not null,
  equipment_id bigint not null,
  video_url text null,
  observations text null,
  is_sport boolean not null default false,
  created_at timestamp with time zone not null default now(),
  constraint exercises_pkey primary key (id),
  constraint exercises_name_key unique (name),
  constraint exercises_equipment_id_fkey foreign key (equipment_id) references equipment (id) on delete cascade
);
```

#### Tabla `workouts`
```sql
create table public.workouts (
  id bigint generated by default as identity not null,
  exercise_id bigint not null,
  serie bigint null,
  weight double precision not null,
  seconds bigint null,
  reps bigint not null,
  observations text null,
  created_at timestamp with time zone not null default now(),
  constraint workouts_pkey primary key (id),
  constraint workouts_exercise_id_fkey foreign key (exercise_id) references exercises (id) on delete cascade
);
```

#### Tabla `muscle_groups`
```sql
create table public.muscle_groups (
  id bigint generated by default as identity not null,
  name text not null,
  category public.muscle_groups_category not null,
  observations text null,
  created_at timestamp with time zone not null default now(),
  constraint muscle_groups_pkey primary key (id)
);
```

#### Tabla `exercise_muscle_groups`
```sql
create table public.exercise_muscle_groups (
  id bigint generated by default as identity not null,
  exercise_id bigint not null,
  muscule_group_id bigint not null,
  role public.muscle_groups_role not null,
  created_at timestamp with time zone not null default now(),
  constraint exercise_muscle_groups_pkey primary key (id),
  constraint exercise_muscle_groups_exercise_id_fkey foreign key (exercise_id) references exercises (id) on delete cascade,
  constraint exercise_muscle_groups_muscule_group_id_fkey foreign key (muscule_group_id) references muscle_groups (id) on delete cascade
);
```

> Enums relevantes: `equipment_category`, `exercises_muscle_group`, `muscle_groups_category`, `muscle_groups_role`.

---

### 🔐 Seguridad
- Autenticación con Google OAuth antes de permitir el registro
- Futuro: Supabase Auth si hay usuarios múltiples
- RLS a definir según necesidades de lectura/escritura por recurso

---

### 🧰 Stack técnico
- **Frontend**: React + TypeScript + Vite
- **Testing Frontend**: Vitest + React Testing Library
- **Backend**: Go (API REST) + librería estándar de testing
- **DB**: Supabase (PostgreSQL)

---

### 🔌 API REST (borrador de endpoints)

- `GET /api/workouts` — listar entrenamientos (paginado, filtros por fecha/ejercicio)
- `POST /api/workouts` — crear entrenamiento
- `GET /api/exercises` — listar ejercicios (filtros: grupo muscular, equipo)
- `GET /api/equipment` — listar equipos
- `GET /api/health` — health check del backend

Validación Back-End:
- `weight` y `reps` son obligatorios para crear `workout`
- `exercise_id` debe existir y estar activo

---

### 🧪 Enfoque TDD

#### Fase 1 — Frontend (Vitest + RTL)
- Componentes: `LoginComponent`, `WorkoutForm`, `TimerComponent`, `ExerciseList`, `EquipmentDetail`
- Integración: flujo de registro, navegación por pestañas, errores de API
- Hooks: `useWorkoutForm`, `useTimer`, `useExercises`, `useEquipment`

#### Fase 2 — Backend (Go stdlib)
- Handlers: `GET/POST /api/workouts`, `GET /api/exercises`, `GET /api/equipment`
- Middleware: Supabase Auth, CORS, logging
- Modelos/utilidades: validaciones y conversión de tipos

#### Fase 3 — Base de datos
- Migraciones: creación de tablas, índices, constraints
- Queries: rendimiento e integridad de datos en joins `workouts/exercises/equipment`

#### Fase 4 — E2E (posterior)
- Flujos completos: registro, uso de cronómetro, búsqueda y detalle de ejercicios

---

### ✅ Criterios de aceptación

- Registro de Entrenamientos
  - Usuario selecciona ejercicio, ingresa peso y reps (obligatorios); serie/segundos/observaciones (opcionales)
  - Guardado exitoso en Supabase y feedback visual
  - Manejo de errores de red/validación

- Autenticación
  - Autenticación con Google OAuth requerida
  - Error con código incorrecto; acceso con código correcto
  - Sesión simple mientras navega (estado global)

- Cronómetro
  - Iniciar/pausar/resetear
  - Indicador visual cuando está entre 40–50s

- Ejercicios
  - Lista desde Supabase
  - Filtro por grupo muscular y equipo
  - Detalle: nombre, equipo, grupo muscular, observaciones, video (opcional)

- Notificaciones
  - Lista, filtro por tipo, orden por fecha

---

### 📊 Métricas de calidad
- Cobertura de tests: Frontend >80%, Backend >85%, E2E >70%
- Performance: carga inicial <3s; API <500ms
- Accesibilidad: WCAG 2.1 AA; navegación por teclado; compatible screen reader

---

### 🚀 Futuro
- Exportar registros a CSV o Google Sheets
- Autenticación con cuentas de Google UNC (vía Supabase Auth)
- Seguimiento de progresos (peso total movido por semana)
- Modo móvil y soporte offline
- Tests de carga y monitoreo/alertas


